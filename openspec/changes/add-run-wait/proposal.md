# 変更提案: add-run-wait

## 背景/課題
`run` は非同期起動が前提のため、短命ジョブでも `run` → `wait` → `tail` の往復が必要になり、呼び出し側の実装が冗長になる。エージェントやCIのように単発実行が多いユースケースでは、1コマンドで完結できる導線が不足している。

## 目的
- 短命ジョブを `run --wait` で1コマンド完結にする
- 既存の非同期 `run` の挙動は維持し、互換性を崩さない

## スコープ
- `run --wait` オプションの追加
- `run` レスポンスに終端状態の情報と最終ログ末尾を含める
- 仕様・テストの更新

## 非スコープ
- 既存 `run` の既定挙動変更
- `follow`/ストリーミング出力
- ジョブキュー/並列制御

## 成功指標
- 単発ジョブの呼び出し回数が 3→1 に減る
- 既存クライアントの破壊的変更が発生しない
- `run --wait` の統合テストが安定して通る

## 依存/リスク
- 既存の `snapshot-after` と待機時間の扱いが混同されやすい（設計で明確化）
- 追加フィールドが既存クライアントの厳密パーサに影響する可能性（`skip_serializing_if` 活用で低減）
