# 変更提案: run のログストリーミング共通化

## 概要

`run` の stdout/stderr ログ書き込み処理を共通化し、重複したスレッド処理を 1 つのヘルパーに統合する。挙動（ログ内容・順序・フォーマット）は維持する。

## 目的

- stdout/stderr の実装乖離リスクを減らす
- ログ処理の変更点を 1 箇所に集約し、保守性を上げる

## スコープ

- `src/run.rs` の stdout/stderr 監視スレッド処理の共通化
- 既存のログフォーマット（`full.log` の行形式）とバッファサイズの維持

## スコープ外

- ログ出力フォーマットの変更
- JSON スキーマ、CLI フラグ、スナップショット仕様の変更
- パフォーマンス特性の変更

## 受け入れ基準

- `stdout.log` / `stderr.log` / `full.log` の内容がリファクタ前と一致する
- stdout の JSON 出力仕様に変更がない
- 既存の統合テストがすべて通る
